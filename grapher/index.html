<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(init);
      

 

      
      function init() {
      var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

      // to lazy to write code to load from json, so just copy pasting values from targetFile for now
      let rawData = 
      [[0,68],[1,68],[4,69],[6,70],[8,69],[14,71],[16,75],[21,74],[23,75],[24,76],[27,81],[28,82],[29,84],[30,85],[31,86],[33,89],[34,90],[39,87],[40,86],[41,85],[42,83],[43,82],[45,81],[46,82],[47,81],[48,79],[52,80],[53,81],[55,80],[59,82],[60,83],[61,85],[62,86],[65,90],[66,92],[67,94],[68,96],[70,97],[71,100],[72,102],[73,104],[74,105],[75,107],[78,110],[81,114],[82,115],[85,114],[91,115],[94,116],[95,117],[96,118],[97,119],[99,120],[100,121],[101,122],[104,123],[107,124],[109,123],[110,124],[111,123],[112,122],[114,123],[115,122],[116,123],[121,125],[122,126],[123,127],[124,128],[125,130],[126,131],[127,132],[129,133],[138,134],[142,135],[145,136],[147,137],[148,138],[149,139],[150,140],[152,141],[153,139],[156,140],[157,139],[158,138],[159,136],[160,134],[161,133],[164,134],[166,132],[167,130],[168,128],[169,126],[170,122],[171,119],[172,117],[173,115],[174,114],[176,113],[177,111],[182,110],[191,108],[192,107],[193,106],[194,104],[195,103],[196,102],[201,101],[205,102],[206,103],[210,104],[211,105],[212,106],[213,108],[215,109],[219,108],[220,107],[227,108],[228,109],[229,112],[230,113],[231,114],[234,113],[235,111],[237,112],[239,113],[240,114],[242,116],[246,118],[247,119],[248,121],[249,122],[250,124],[251,125],[252,128],[253,131],[254,133],[256,135],[257,134],[258,133],[263,134],[264,135],[266,134],[268,132],[269,129],[270,127],[271,125],[275,124],[276,123],[277,121],[278,120],[280,119],[282,118],[283,117],[284,115],[285,113],[286,112],[290,111],[292,110],[294,111],[301,112],[302,114],[303,116],[304,117],[305,118],[306,120],[307,121],[308,122],[309,125],[310,126],[311,128],[312,129],[313,131],[314,132],[315,138],[316,139],[317,143],[318,143],[320,145],[321,147],[322,148],[325,149],[326,150],[327,151],[328,152],[329,153],[330,154],[331,155],[332,156],[333,157],[334,158],[335,160],[336,161],[337,162],[338,163],[339,162],[343,161],[345,160],[346,159],[348,158],[353,159],[356,160],[357,161],[359,163],[360,164],[361,165],[362,166],[364,167],[365,168],[367,169],[369,170],[372,171],[375,172],[376,171],[379,172],[386,173],[391,174],[397,175],[402,176],[403,175],[405,176],[406,175],[418,174],[420,173],[421,171],[422,169],[423,167],[424,166],[425,164],[426,162],[427,161],[430,160],[431,159],[432,158],[434,157],[438,158],[440,159],[442,158],[443,157],[445,154],[446,151],[447,149],[448,145],[449,143],[450,141],[451,140],[453,139],[454,140],[457,142],[458,143],[459,144],[460,146],[461,148],[462,149],[463,151],[465,150],[468,151],[469,150],[470,151],[474,152],[477,153],[480,154],[482,155],[483,156],[485,158],[486,159],[487,160],[488,161],[490,162],[491,164],[493,165],[494,166],[498,167],[499,166],[501,167],[504,166],[505,167],[506,166],[507,167],[511,168],[512,169],[513,170],[514,171],[517,172],[519,173],[522,174],[524,175],[525,174],[526,175],[528,174],[533,173],[534,174],[535,173],[536,174],[542,175],[546,176],[548,177],[550,176],[551,177],[556,176],[557,177],[558,176],[559,177],[561,176],[574,177],[575,178],[584,179],[586,178],[587,179],[591,180],[593,179],[598,178],[601,176],[602,174],[603,172],[604,170],[605,169],[606,167],[607,165],[608,164],[609,163],[610,162],[612,161],[614,160],[615,159],[617,158],[618,159],[619,158],[621,157],[622,156],[623,154],[624,153],[625,151],[626,150],[627,148],[628,147],[629,145],[630,144],[632,143],[634,142],[635,143],[637,144],[638,145],[640,147],[641,150],[642,151],[643,153],[644,154],[645,155],[646,156],[649,157],[656,158],[658,159],[660,160],[662,161],[663,162],[668,163],[669,164],[672,165],[674,166],[675,167],[676,168],[677,169],[680,170],[682,172],[683,173],[684,174],[685,175],[687,176],[689,177],[690,178],[693,179],[698,180],[703,179],[704,180],[708,179],[711,178],[716,177],[717,178],[719,179],[720,178],[721,179],[722,180],[728,181],[732,182],[736,181],[739,180],[740,181],[741,182],[742,181],[743,180],[744,179],[745,180],[746,179],[749,178],[751,179],[752,178],[754,179],[756,178],[760,179],[761,178],[762,179],[772,178],[775,177],[776,175],[777,173],[778,172],[779,170],[780,169],[781,167],[782,166],[783,165],[784,164],[785,163],[786,162],[787,161],[788,160],[791,161],[795,162],[796,163],[799,164],[801,165],[806,164],[807,163],[809,161],[810,160],[812,159],[813,158],[814,157],[815,156],[817,155],[819,154],[826,153],[828,151],[829,150],[830,149],[831,148],[834,149],[836,150],[838,149],[839,148],[840,147],[841,146],[842,145],[843,144],[845,143],[848,142],[850,141],[851,142],[853,143],[854,142],[856,141],[858,140],[859,139],[863,138],[867,139],[869,140],[870,139],[872,138],[873,137],[875,136],[876,135],[877,133],[878,132],[880,131],[882,130],[884,128],[885,127],[889,126],[891,125],[893,127],[894,128],[895,129],[897,130],[898,131],[899,130],[900,131],[901,130],[903,129],[904,128],[907,127],[908,128],[916,126],[920,125],[921,124],[922,123],[923,122],[924,121],[926,122],[928,124],[930,125],[933,124],[937,123],[940,125],[941,126],[943,125],[945,126],[948,127],[950,128],[952,129],[954,130],[956,131],[957,132],[958,131],[960,130],[963,129],[969,128],[970,127],[971,126],[972,125],[973,124],[975,123],[976,122],[978,121],[979,122],[980,121],[983,120],[988,121],[994,122],[995,123],[999,124],[1000,125],[1001,126],[1002,127],[1009,128],[1010,127],[1016,128],[1018,129],[1021,128],[1024,127],[1026,128],[1027,129],[1028,128],[1034,127],[1036,126],[1044,127],[1047,126],[1048,127],[1049,128],[1050,129],[1051,130],[1053,131],[1057,130],[1058,129],[1060,128],[1061,127],[1063,126],[1068,127],[1071,128],[1073,129],[1076,130],[1081,131],[1082,132],[1084,131],[1086,130],[1087,129],[1088,128],[1100,127],[1102,128],[1106,127],[1108,128],[1109,129],[1110,130],[1111,129],[1114,128],[1115,129],[1118,130],[1119,129],[1121,130],[1126,131],[1127,132],[1132,133],[1137,132],[1139,133],[1142,132],[1144,130],[1145,129],[1150,128],[1162,127],[1166,128],[1167,127],[1169,128],[1170,129],[1172,130],[1173,129],[1174,128],[1175,127],[1176,126],[1178,125],[1185,124],[1187,123],[1188,122],[1190,121],[1192,122],[1195,123],[1198,122],[1200,121],[1201,120],[1206,121],[1209,120],[1210,119],[1211,118],[1215,117],[1216,118],[1219,117],[1221,115],[1223,114],[1224,115],[1226,116],[1231,117],[1233,116],[1235,117],[1237,118],[1240,120],[1241,121],[1243,122],[1246,123],[1249,124],[1256,125],[1257,124],[1260,123],[1266,124],[1269,123],[1271,124],[1275,125],[1279,126],[1284,127],[1288,128],[1292,129],[1296,128],[1300,129],[1301,128],[1303,127],[1304,126],[1305,125],[1311,126],[1314,125],[1317,126],[1318,125],[1322,126],[1323,127],[1325,128],[1326,127],[1327,126],[1328,125],[1335,126],[1337,125],[1343,124],[1345,123],[1346,122],[1347,121],[1352,120],[1353,119],[1354,118],[1356,117],[1357,116],[1358,115],[1359,116],[1360,117],[1362,118],[1364,119],[1366,120],[1367,121],[1370,120],[1371,119],[1372,118],[1377,119],[1378,120],[1380,121],[1385,120],[1387,119],[1388,118],[1389,117],[1390,116],[1391,115],[1393,114],[1395,115],[1398,114],[1399,115],[1400,116],[1401,117],[1402,118],[1403,119],[1405,118],[1406,117],[1407,115],[1408,114],[1409,113],[1410,114],[1413,113],[1414,112],[1415,111],[1416,110],[1419,108],[1420,107],[1421,105],[1423,104],[1425,105],[1426,106],[1428,108],[1429,109],[1435,110],[1438,111],[1439,110],[1441,109],[1444,110],[1445,111],[1446,112],[1447,114],[1449,115],[1454,112],[1455,110],[1456,106],[1457,105],[1458,104],[1459,105],[1460,107],[1461,108],[1462,109],[1463,111],[1464,112],[1465,113],[1466,114],[1468,115],[1469,116],[1470,117],[1471,118],[1472,119],[1474,120],[1475,121],[1476,122],[1477,123],[1479,124],[1480,125],[1481,126],[1482,127],[1484,128],[1487,129],[1488,130],[1489,131],[1490,132],[1491,133],[1492,134],[1493,135],[1495,136],[1496,137],[1498,138],[1499,139],[1502,140],[1505,141],[1507,142],[1509,143],[1511,144],[1512,145],[1513,146],[1519,145],[1520,144],[1524,143],[1525,142],[1527,141],[1528,140],[1536,141],[1540,142],[1545,141],[1548,142],[1552,143],[1556,144],[1561,145],[1563,146],[1565,147],[1566,148],[1567,149],[1568,150],[1570,151],[1572,152],[1574,153],[1576,154],[1578,156],[1580,157],[1582,158],[1587,157],[1594,156],[1596,157],[1597,156],[1600,155],[1601,154],[1607,155],[1613,156],[1618,155],[1623,156],[1624,155],[1625,156],[1626,157],[1629,158],[1631,159],[1632,160],[1633,161],[1634,162],[1637,163],[1639,164],[1641,165],[1643,164],[1646,163],[1648,162],[1650,161],[1651,160],[1653,159],[1654,158],[1656,157],[1657,156],[1660,155],[1663,154],[1665,153],[1666,152],[1669,151],[1671,150],[1672,149],[1674,148],[1676,149],[1678,150],[1680,151],[1682,152],[1683,153],[1685,154],[1693,155],[1704,154],[1707,153],[1709,154],[1713,155],[1716,156],[1719,157],[1728,158],[1730,157],[1731,158],[1732,157],[1736,156],[1738,155],[1739,156],[1740,155],[1742,154],[1743,153],[1744,152],[1745,150],[1746,149],[1747,148],[1748,147],[1750,146],[1751,145],[1753,146],[1763,147],[1764,146],[1770,147],[1773,148],[1775,149],[1776,150],[1777,151],[1778,153],[1780,154],[1781,153],[1783,152],[1785,151],[1787,152],[1789,153],[1791,154],[1792,155],[1795,156],[1798,157],[1800,158],[1803,159],[1805,160],[1808,161],[1811,162],[1821,161],[1823,160],[1824,159],[1825,158],[1827,157],[1828,156],[1829,155],[1830,154],[1831,153],[1832,152],[1833,151],[1835,150],[1837,149],[1838,148],[1839,147],[1841,146],[1843,145],[1844,144],[1845,143],[1846,142],[1848,141],[1852,140],[1855,139],[1862,140],[1863,141],[1864,142],[1865,143],[1867,144],[1868,145],[1869,146],[1870,147],[1871,148],[1872,149],[1874,150],[1876,151],[1877,152],[1878,153],[1879,154],[1880,155],[1881,156],[1882,158],[1884,160],[1886,161],[1887,162],[1888,163],[1889,164],[1892,165],[1893,164],[1894,165],[1895,164],[1897,163],[1898,162],[1899,161],[1900,160],[1902,159],[1904,158],[1906,157],[1908,156],[1909,155],[1912,154],[1914,153],[1917,152],[1918,153],[1920,154],[1925,153],[1929,152],[1930,153],[1932,154],[1934,155],[1935,156],[1937,157],[1938,158],[1939,159],[1941,160],[1942,161],[1943,162],[1945,163],[1947,164],[1949,165],[1954,164],[1955,163],[1956,162],[1957,161],[1958,160],[1959,159],[1960,158],[1962,157],[1964,156],[1965,155],[1967,154],[1969,155],[1971,154],[1973,153],[1974,152],[1975,151],[1976,150],[1977,148],[1978,147],[1979,145],[1981,143],[1982,141],[1983,140],[1985,139],[1987,138],[1988,137],[1989,136],[1990,133],[1991,132],[1992,131],[1994,130],[1995,128],[1996,127],[1997,126],[1998,125],[1999,123],[2003,122],[2004,121],[2006,120],[2010,121],[2011,122],[2012,123],[2013,124],[2014,125],[2015,126],[2016,127],[2017,128],[2018,129],[2020,128],[2021,125],[2022,123],[2023,121],[2024,120],[2025,119],[2026,118],[2028,117],[2029,118],[2030,119],[2031,120],[2034,119],[2035,118],[2036,117],[2037,116],[2038,115],[2039,114],[2040,113],[2044,112],[2046,113],[2047,114],[2048,115],[2049,116],[2053,115],[2055,115]]
      
      //chart options
      var options = {
          width: 1000,
          height: 240,
          legend: {position: 'none'},
          // animation:{
          //   duration: 200,
          //   easing: 'out',
          // }, //messed up annotation
          vAxis: {minValue:0, maxValue:200, title: 'HR'},
          hAxis: {minValue:0, maxValue: 25, title: `Time Elapsed: 00:00:00`,},
          annotations: {
            textStyle: {
              fontSize: 18,
              bold: true,
              // The transparency of the text.
              opacity: 0.8
            }
          }
        };

        //google datatable
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'Seconds');
        data.addColumn('number', 'HR');
        data.addColumn({type:'string', role:'annotation'})
        let hrVal = 0;
        //loop through each second
        let index = 0;
        const myInterval = setInterval(
        function(){
          if(index < rawData[rawData.length-1][0]){

               // for each second, look for a match , if no match insert prev HR value
          for (let innerIndex=0; innerIndex<rawData.length ; innerIndex++){
            hrVal = index == rawData[innerIndex][0] ? rawData[innerIndex][1]:hrVal
            if(rawData[innerIndex][0] > index) break;
          }
          const annotationText = `HR: ${hrVal.toString()}`;
          const annotation = annotationText // index+1 === outerIndex ? annotationText : null;
          data.addRow([index, hrVal,annotation]);
          // remove anotation from previous entry
          if(index > 0){
            data.setValue(index-1, 2, null);
          } 
          //update chart options
          let hAxisMaxVal = (index * .25 + index) > 25 ? (index * .25 + index) : 25
          hAxisMaxVal = hAxisMaxVal > rawData[rawData.length-1][0] ? rawData[rawData.length-1][0] : hAxisMaxVal
          options.hAxis.maxValue = hAxisMaxVal;
          
          let secondsElaps = index < 0 ? 0 : index;
          var date = new Date(0);
          date.setSeconds(secondsElaps); // specify value for SECONDS here
          var formatSecondsElaps = date.toISOString().substr(11, 8);
          options.hAxis.title = `Time Elapsed: ${formatSecondsElaps}`
          // draw
          chart.draw(data, options);

          index += 1;
          }
          else {
            clearInterval(myInterval);
          }
        }, 1
      );


      //   for (let index = 0; index < rawData[rawData.length-1][0]; index++) { // loop through each item in array
      //     //for each second, look for a match , if no match insert prev HR value
      //     for (let innerIndex=0; innerIndex<rawData.length ; innerIndex++){
      //       hrVal = index == rawData[innerIndex][0] ? rawData[innerIndex][1]:hrVal
      //       if(rawData[innerIndex][0] > index) break;
      //     }
      //     const annotationText = `HR: ${hrVal.toString()}`;
      //     const annotation = annotationText // index+1 === outerIndex ? annotationText : null;
      //     data.addRow([index, hrVal,annotation]);
      //     // remove anotation from previous entry
      //     if(index > 0){
      //       data.setValue(index-1, 2, null);
      //     } 
      //     //update chart options
      //     let hAxisMaxVal = (index * .25 + index) > 25 ? (index * .25 + index) : 25
      //     hAxisMaxVal = hAxisMaxVal > rawData[rawData.length-1][0] ? rawData[rawData.length-1][0] : hAxisMaxVal
      //     options.hAxis.maxValue = hAxisMaxVal;
          
      //     let secondsElaps = outerIndex < 0 ? 0 : outerIndex;
      //     var date = new Date(0);
      //     date.setSeconds(secondsElaps); // specify value for SECONDS here
      //     var formatSecondsElaps = date.toISOString().substr(11, 8);
      //     options.hAxis.title = `Time Elapsed: ${formatSecondsElaps}`
      //     // draw
      //     chart.draw(data, options);
      //     // wait 1 second
      //   }
        
      }
      

    </script>
  </head>
  <body>
    <div id="curve_chart" style="width: 1080px; height: 500px"></div>
  </body>
</html>